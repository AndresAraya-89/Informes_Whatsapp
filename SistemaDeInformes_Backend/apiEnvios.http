@baseUrl = http://127.0.0.1:8000/api
@contactoId = 1
@archivoId = 1

###
# =============================================
# 1. CREAR un nuevo registro de envío (POST)
# =============================================
POST {{baseUrl}}/envios/
Content-Type: application/json

{
    "IdContacto": {{contactoId}},
    "IdArchivo": {{archivoId}},
    "EstadoEnvio": "Enviado",
    "TwilioSID": "SMxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
}

###
# =============================================
# 2. OBTENER el historial de envíos de un contacto (GET)
# =============================================
GET {{baseUrl}}/contactos/{{contactoId}}/historial/

###
# =============================================
# 1. ENDPOINT PRINCIPAL: ENVIAR INFORME (POST)
# =============================================
# Este endpoint recibe la URL del PDF desde el frontend y orquesta todo el flujo:
# - Registra el archivo en la BD.
# - Envía el mensaje por WhatsApp.
# - Registra el envío en la BD.
POST {{baseUrl}}/enviar-informe/
Content-Type: application/json

{
    "id_contacto": 1,
    "nombre_archivo": "informe_final_julio.pdf",
    "pdf_url": "https://www.dropbox.com/scl/fi/n03pnm3kt0b0ghifm08ui/Esquema1.pdf?rlkey=xlt906n42m9vkwarazueio2aa&st=g7gplsb4&dl=1"
}

###
# =============================================
# ENVIAR un mensaje de texto simple (POST)
# =============================================
POST {{baseUrl}}/enviar-mensaje-texto/
Content-Type: application/json

{
    "id_contacto": 1,
    "mensaje": "Hola mundo."
}

